{"ast":null,"code":"import { onMounted, ref } from \"vue\";\nimport LogOutButton from \"./Logout.vue\";\nexport default {\n  name: \"Pro-file\",\n  components: {\n    LogOutButton\n  },\n  setup() {\n    const username = ref(\"\");\n    const profileData = ref(null);\n    const userId = ref(null);\n    onMounted(async () => {\n      console.log(\"User Profile\");\n      const storedData = localStorage.getItem(\"identity\");\n      if (storedData) {\n        const identityObject = JSON.parse(storedData);\n        username.value = identityObject.username;\n        userId.value = identityObject.id;\n      }\n      try {\n        const options = {\n          method: \"GET\",\n          headers: {\n            Authorization: \"Bearer \" + localStorage.getItem(\"token\")\n          }\n        }; // Close the options object here\n\n        const response = await fetch(`http://127.0.0.1:8000/profile/${userId.value}`, options);\n        if (response.ok) {\n          const data = await response.json();\n          console.log(\"Profile From Backend\");\n          profileData.value = data;\n        } else {\n          console.error(\"Failed to fetch user profile data\");\n        }\n      } catch (error) {\n        console.error(\"Error fetching user profile data:\", error);\n      }\n    });\n    return {\n      username,\n      profileData\n    };\n  }\n};","map":{"version":3,"names":["onMounted","ref","LogOutButton","name","components","setup","username","profileData","userId","console","log","storedData","localStorage","getItem","identityObject","JSON","parse","value","id","options","method","headers","Authorization","response","fetch","ok","data","json","error"],"sources":["src/views/Profile.vue"],"sourcesContent":["<template>\n  <div class=\"container-fluid\">\n    <nav\n      class=\"navbar navbar-expand-lg navbar-light bg-light fixed-top\"\n      style=\"font-size: 24px; padding: 20px\"\n    >\n      <h4>{{ username }}'s Dashboard</h4>\n      |\n      <br />\n      <router-link to=\"/user_dashboard\"> User Dashboard </router-link> |<br />\n      <router-link to=\"/bookings\"> Bookings </router-link> |<br />\n      <router-link to=\"/profile\"> Profile </router-link> |<br />\n      <LogOutButton />\n    </nav>\n\n    <div v-if=\"profileData\">\n      <h2>Username: {{ profileData.username }}</h2>\n      <h2>Email: {{ profileData.email }}</h2>\n      <h2>Role: {{ profileData.role }}</h2>\n      <h2>Role Description: {{ profileData.role_descr }}</h2>\n    </div>\n    <div v-else>\n      <p>Loading...</p>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { onMounted, ref } from \"vue\";\nimport LogOutButton from \"./Logout.vue\";\n\nexport default {\n  name: \"Pro-file\",\n\n  components: {\n    LogOutButton,\n  },\n  setup() {\n    const username = ref(\"\");\n    const profileData = ref(null);\n    const userId = ref(null);\n\n    onMounted(async () => {\n      console.log(\"User Profile\");\n      const storedData = localStorage.getItem(\"identity\");\n      if (storedData) {\n        const identityObject = JSON.parse(storedData);\n        username.value = identityObject.username;\n        userId.value = identityObject.id;\n      }\n\n      try {\n        const options = {\n          method: \"GET\",\n          headers: {\n            Authorization: \"Bearer \" + localStorage.getItem(\"token\"),\n          },\n        }; // Close the options object here\n\n        const response = await fetch(\n          `http://127.0.0.1:8000/profile/${userId.value}`,\n          options\n        );\n        if (response.ok) {\n          const data = await response.json();\n          console.log(\"Profile From Backend\");\n          profileData.value = data;\n        } else {\n          console.error(\"Failed to fetch user profile data\");\n        }\n      } catch (error) {\n        console.error(\"Error fetching user profile data:\", error);\n      }\n    });\n\n    return { username, profileData };\n  },\n};\n</script>\n"],"mappings":"AA4BA,SAAAA,SAAA,EAAAC,GAAA;AACA,OAAAC,YAAA;AAEA;EACAC,IAAA;EAEAC,UAAA;IACAF;EACA;EACAG,MAAA;IACA,MAAAC,QAAA,GAAAL,GAAA;IACA,MAAAM,WAAA,GAAAN,GAAA;IACA,MAAAO,MAAA,GAAAP,GAAA;IAEAD,SAAA;MACAS,OAAA,CAAAC,GAAA;MACA,MAAAC,UAAA,GAAAC,YAAA,CAAAC,OAAA;MACA,IAAAF,UAAA;QACA,MAAAG,cAAA,GAAAC,IAAA,CAAAC,KAAA,CAAAL,UAAA;QACAL,QAAA,CAAAW,KAAA,GAAAH,cAAA,CAAAR,QAAA;QACAE,MAAA,CAAAS,KAAA,GAAAH,cAAA,CAAAI,EAAA;MACA;MAEA;QACA,MAAAC,OAAA;UACAC,MAAA;UACAC,OAAA;YACAC,aAAA,cAAAV,YAAA,CAAAC,OAAA;UACA;QACA;;QAEA,MAAAU,QAAA,SAAAC,KAAA,CACA,iCAAAhB,MAAA,CAAAS,KAAA,IACAE,OACA;QACA,IAAAI,QAAA,CAAAE,EAAA;UACA,MAAAC,IAAA,SAAAH,QAAA,CAAAI,IAAA;UACAlB,OAAA,CAAAC,GAAA;UACAH,WAAA,CAAAU,KAAA,GAAAS,IAAA;QACA;UACAjB,OAAA,CAAAmB,KAAA;QACA;MACA,SAAAA,KAAA;QACAnB,OAAA,CAAAmB,KAAA,sCAAAA,KAAA;MACA;IACA;IAEA;MAAAtB,QAAA;MAAAC;IAAA;EACA;AACA"},"metadata":{},"sourceType":"module","externalDependencies":[]}