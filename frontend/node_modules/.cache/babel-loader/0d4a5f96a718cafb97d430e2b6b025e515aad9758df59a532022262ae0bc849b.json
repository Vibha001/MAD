{"ast":null,"code":"import { onMounted, ref } from \"vue\";\nimport LogOutButton from \"./Logout.vue\";\nexport default {\n  name: \"Sum-mary\",\n  components: {\n    LogOutButton\n  },\n  setup() {\n    const username = ref(\"\");\n    const theatreSummaryImageSrc = ref(\"\");\n    const showSummaryImageSrc = ref(\"\");\n    onMounted(async () => {\n      console.log(\"Sumary mounted\");\n      const storedData = localStorage.getItem(\"identity\");\n      if (storedData) {\n        const identityObject = JSON.parse(storedData);\n        username.value = identityObject.username;\n      }\n      const response = await fetch(\"http://127.0.0.1:8000/theatre_summmary\", {\n        method: \"GET\",\n        headers: {\n          Authorization: \"Bearer \" + localStorage.getItem(\"token\")\n        }\n      });\n      if (response.ok) {\n        try {\n          const responseData = await response.json();\n          const imageBase64 = responseData.theatre_image_base64;\n          const dataURI = `data:image/png;base64,${imageBase64}`;\n          theatreSummaryImageSrc.value = dataURI;\n        } catch (error) {\n          console.error(\"Error parsing image data:\", error);\n        }\n      } else {\n        console.error(\"Failed to fetch theater summary image. Status code:\", response.status);\n      }\n      const showResponse = await fetch(\"http://127.0.0.1:8000/show_summmary\", {\n        method: \"GET\",\n        headers: {\n          Authorization: \"Bearer \" + localStorage.getItem(\"token\")\n        }\n      });\n      if (showResponse.ok) {\n        try {\n          const showData = await showResponse.json();\n          const showImageBase64 = showData.show_image_base64;\n          const showDataURI = `data:image/png;base64,${showImageBase64}`;\n          showSummaryImageSrc.value = showDataURI;\n        } catch (error) {\n          console.error(\"Error parsing show image data:\", error);\n        }\n      } else {\n        console.error(\"Failed to fetch show summary image. Status code:\", showResponse.status);\n      }\n    });\n    return {\n      username,\n      theatreSummaryImageSrc,\n      showSummaryImageSrc\n    };\n  }\n};","map":{"version":3,"names":["onMounted","ref","LogOutButton","name","components","setup","username","theatreSummaryImageSrc","showSummaryImageSrc","console","log","storedData","localStorage","getItem","identityObject","JSON","parse","value","response","fetch","method","headers","Authorization","ok","responseData","json","imageBase64","theatre_image_base64","dataURI","error","status","showResponse","showData","showImageBase64","show_image_base64","showDataURI"],"sources":["src/views/Summary.vue"],"sourcesContent":["<template>\n  <div class=\"container-fluid\">\n    <nav\n      class=\"navbar navbar-expand-lg navbar-light bg-light fixed-top\"\n      style=\"font-size: 24px; padding: 20px\"\n    >\n      <h4>{{ username }}'s Dashboard</h4>\n      |\n      <br />\n      <router-link to=\"/admin_dashboard\"> Dashboard </router-link> |<br />\n      <router-link to=\"/summary\"> Summary </router-link> |<br />\n      <LogOutButton />\n    </nav>\n    <img\n      id=\"theatreSummaryImage\"\n      alt=\"Theatre Summary\"\n      :src=\"theatreSummaryImageSrc\"\n    />\n    <img id=\"showSummaryImage\" alt=\"Show Summary\" :src=\"showSummaryImageSrc\" />\n  </div>\n</template>\n\n<script>\nimport { onMounted, ref } from \"vue\";\nimport LogOutButton from \"./Logout.vue\";\nexport default {\n  name: \"Sum-mary\",\n\n  components: {\n    LogOutButton,\n  },\n  setup() {\n    const username = ref(\"\");\n    const theatreSummaryImageSrc = ref(\"\");\n    const showSummaryImageSrc = ref(\"\");\n\n    onMounted(async () => {\n      console.log(\"Sumary mounted\");\n      const storedData = localStorage.getItem(\"identity\");\n      if (storedData) {\n        const identityObject = JSON.parse(storedData);\n        username.value = identityObject.username;\n      }\n      const response = await fetch(\"http://127.0.0.1:8000/theatre_summmary\", {\n        method: \"GET\",\n        headers: {\n          Authorization: \"Bearer \" + localStorage.getItem(\"token\"),\n        },\n      });\n\n      if (response.ok) {\n        try {\n          const responseData = await response.json();\n          const imageBase64 = responseData.theatre_image_base64;\n          const dataURI = `data:image/png;base64,${imageBase64}`;\n          theatreSummaryImageSrc.value = dataURI;\n        } catch (error) {\n          console.error(\"Error parsing image data:\", error);\n        }\n      } else {\n        console.error(\n          \"Failed to fetch theater summary image. Status code:\",\n          response.status\n        );\n      }\n      const showResponse = await fetch(\"http://127.0.0.1:8000/show_summmary\", {\n        method: \"GET\",\n        headers: {\n          Authorization: \"Bearer \" + localStorage.getItem(\"token\"),\n        },\n      });\n\n      if (showResponse.ok) {\n        try {\n          const showData = await showResponse.json();\n          const showImageBase64 = showData.show_image_base64;\n          const showDataURI = `data:image/png;base64,${showImageBase64}`;\n          showSummaryImageSrc.value = showDataURI;\n        } catch (error) {\n          console.error(\"Error parsing show image data:\", error);\n        }\n      } else {\n        console.error(\n          \"Failed to fetch show summary image. Status code:\",\n          showResponse.status\n        );\n      }\n    });\n\n    return { username, theatreSummaryImageSrc, showSummaryImageSrc };\n  },\n};\n</script>\n"],"mappings":"AAuBA,SAAAA,SAAA,EAAAC,GAAA;AACA,OAAAC,YAAA;AACA;EACAC,IAAA;EAEAC,UAAA;IACAF;EACA;EACAG,MAAA;IACA,MAAAC,QAAA,GAAAL,GAAA;IACA,MAAAM,sBAAA,GAAAN,GAAA;IACA,MAAAO,mBAAA,GAAAP,GAAA;IAEAD,SAAA;MACAS,OAAA,CAAAC,GAAA;MACA,MAAAC,UAAA,GAAAC,YAAA,CAAAC,OAAA;MACA,IAAAF,UAAA;QACA,MAAAG,cAAA,GAAAC,IAAA,CAAAC,KAAA,CAAAL,UAAA;QACAL,QAAA,CAAAW,KAAA,GAAAH,cAAA,CAAAR,QAAA;MACA;MACA,MAAAY,QAAA,SAAAC,KAAA;QACAC,MAAA;QACAC,OAAA;UACAC,aAAA,cAAAV,YAAA,CAAAC,OAAA;QACA;MACA;MAEA,IAAAK,QAAA,CAAAK,EAAA;QACA;UACA,MAAAC,YAAA,SAAAN,QAAA,CAAAO,IAAA;UACA,MAAAC,WAAA,GAAAF,YAAA,CAAAG,oBAAA;UACA,MAAAC,OAAA,4BAAAF,WAAA;UACAnB,sBAAA,CAAAU,KAAA,GAAAW,OAAA;QACA,SAAAC,KAAA;UACApB,OAAA,CAAAoB,KAAA,8BAAAA,KAAA;QACA;MACA;QACApB,OAAA,CAAAoB,KAAA,CACA,uDACAX,QAAA,CAAAY,MACA;MACA;MACA,MAAAC,YAAA,SAAAZ,KAAA;QACAC,MAAA;QACAC,OAAA;UACAC,aAAA,cAAAV,YAAA,CAAAC,OAAA;QACA;MACA;MAEA,IAAAkB,YAAA,CAAAR,EAAA;QACA;UACA,MAAAS,QAAA,SAAAD,YAAA,CAAAN,IAAA;UACA,MAAAQ,eAAA,GAAAD,QAAA,CAAAE,iBAAA;UACA,MAAAC,WAAA,4BAAAF,eAAA;UACAzB,mBAAA,CAAAS,KAAA,GAAAkB,WAAA;QACA,SAAAN,KAAA;UACApB,OAAA,CAAAoB,KAAA,mCAAAA,KAAA;QACA;MACA;QACApB,OAAA,CAAAoB,KAAA,CACA,oDACAE,YAAA,CAAAD,MACA;MACA;IACA;IAEA;MAAAxB,QAAA;MAAAC,sBAAA;MAAAC;IAAA;EACA;AACA"},"metadata":{},"sourceType":"module","externalDependencies":[]}